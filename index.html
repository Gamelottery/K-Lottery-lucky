<!DOCTYPE html>
<html lang="my">
<head>
  <meta charset="UTF-8">
  <title>Win Go Game</title>
  <style>
    body { font-family: sans-serif; text-align: center; background: #f4f4f4; }
    .numbers { display: grid; grid-template-columns: repeat(5, 60px); gap: 10px; justify-content: center; margin: 20px 0; }
    .num { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: bold; color: #fff; cursor: pointer; }
    .red { background: #e74c3c; }
    .green { background: #2ecc71; }
    .purple { background: #9b59b6; }
    .bet-buttons button, .mode-buttons button { margin: 5px; padding: 10px 20px; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; }
    .small { background: #3498db; color: #fff; }
    .big { background: #f39c12; color: #fff; }
    .mode-buttons button { background: #27ae60; color: #fff; }
    #result { margin-top: 20px; font-size: 18px; }
    #timer { font-size: 22px; margin-top: 10px; }
    #balance { font-size: 20px; font-weight: bold; margin-top: 15px; }
    table { width: 90%; margin: 20px auto; border-collapse: collapse; }
    th, td { border: 1px solid #ccc; padding: 8px; font-size: 14px; }
    th { background: #333; color: #fff; }
  </style>
</head>
<body>

  <h2>Win Go Game</h2>

  <!-- Mode Selector -->
  <div class="mode-buttons">
    <button onclick="setMode(30)">30s</button>
    <button onclick="setMode(60)">1min</button>
    <button onclick="setMode(180)">3min</button>
    <button onclick="setMode(300)">5min</button>
  </div>

  <h3>·Äõ·ÄΩ·Ä±·Ä∏·Äë·Ä¨·Ä∏·Äû·Ä±·Ä¨ Mode: <span id="mode">30s</span></h3>
  <div id="timer">30</div>
  <div id="balance">üí∞ Balance: 1000</div>

  <!-- ·ÄÇ·Äè·Äî·Ä∫·Ä∏ icon -->
  <div class="numbers" id="numberBtns">
    <div class="num purple" onclick="placeBet('number',0)">0</div>
    <div class="num green" onclick="placeBet('number',1)">1</div>
    <div class="num red" onclick="placeBet('number',2)">2</div>
    <div class="num green" onclick="placeBet('number',3)">3</div>
    <div class="num red" onclick="placeBet('number',4)">4</div>
    <div class="num green" onclick="placeBet('number',5)">5</div>
    <div class="num red" onclick="placeBet('number',6)">6</div>
    <div class="num green" onclick="placeBet('number',7)">7</div>
    <div class="num red" onclick="placeBet('number',8)">8</div>
    <div class="num green" onclick="placeBet('number',9)">9</div>
  </div>

  <!-- ·Ä°·ÄÄ·Äº·ÄÆ·Ä∏/·Ä°·Äû·Ä±·Ä∏ -->
  <div class="bet-buttons">
    <button class="small" onclick="placeBet('small')">·Ä°·Äû·Ä±·Ä∏ (0‚Äì4)</button>
    <button class="big" onclick="placeBet('big')">·Ä°·ÄÄ·Äº·ÄÆ·Ä∏ (5‚Äì9)</button>
  </div>

  <!-- Bet Amount -->
  <div style="margin:15px;">
    <label>·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äô·Ää·Ä∑·Ä∫ Amount: </label>
    <input type="number" id="betAmount" value="100" min="10" step="10">
  </div>

  <div id="result"></div>

  <!-- History Table -->
  <h3>üìú Bet History</h3>
  <table>
    <thead>
      <tr>
        <th>·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫</th>
        <th>·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äû·Ää·Ä∑·Ä∫·Ä°·Äô·Äª·Ä≠·ÄØ·Ä∏·Ä°·ÄÖ·Ä¨·Ä∏</th>
        <th>Amount</th>
        <th>·Äë·ÄΩ·ÄÄ·Ä∫·Äú·Ä¨·Äû·Ää·Ä∑·Ä∫·ÄÇ·Äè·Äî·Ä∫·Ä∏</th>
        <th>·Ä°·Äî·Ä≠·ÄØ·ÄÑ·Ä∫/·Ä°·Äõ·Äæ·ÄØ·Ä∂·Ä∏</th>
      </tr>
    </thead>
    <tbody id="history"></tbody>
  </table>

  <script>
    let currentMode = 30;
    let timeLeft = currentMode;
    let bet = null;
    let balance = 1000;

    // LocalStorage Load
    let historyData = JSON.parse(localStorage.getItem("historyData")) || [];
    renderHistory();

    function setMode(seconds) {
      currentMode = seconds;
      timeLeft = seconds;
      document.getElementById("mode").innerText = 
        seconds === 30 ? "30s" : 
        seconds === 60 ? "1min" : 
        seconds === 180 ? "3min" : "5min";
      document.getElementById("timer").innerText = timeLeft;
      document.getElementById("result").innerText = "";
      bet = null;
    }

    function placeBet(type, number=null) {
      let amount = parseInt(document.getElementById("betAmount").value);
      if (amount > balance) {
        document.getElementById("result").innerText = "‚ùå Balance ·Äô·Äú·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Ä´";
        return;
      }
      bet = (type === 'number') ? { type:'number', value:number, amount:amount }
                                : { type:type, amount:amount };
      document.getElementById("result").innerText = 
        "Bet placed: " + (type==='number' ? "·ÄÇ·Äè·Äî·Ä∫·Ä∏ " + number : (type==='small' ? "·Ä°·Äû·Ä±·Ä∏" : "·Ä°·ÄÄ·Äº·ÄÆ·Ä∏")) 
        + " ‚Üí " + amount + " ·ÄÄ·Äª·Äï·Ä∫";
    }

    function updateBalance() {
      document.getElementById("balance").innerText = "üí∞ Balance: " + balance;
    }

    function addHistory(betType, amount, randomNum, resultText) {
      let now = new Date().toLocaleTimeString();
      let newRecord = { time: now, betType, amount, randomNum, resultText };
      historyData.unshift(newRecord); // add to beginning
      if (historyData.length > 50) historyData.pop(); // keep max 50 records
      localStorage.setItem("historyData", JSON.stringify(historyData));
      renderHistory();
    }

    function renderHistory() {
      let tbody = document.getElementById("history");
      tbody.innerHTML = "";
      historyData.forEach(item => {
        let row = document.createElement("tr");
        row.innerHTML = `
          <td>${item.time}</td>
          <td>${item.betType}</td>
          <td>${item.amount}</td>
          <td>${item.randomNum}</td>
          <td>${item.resultText}</td>
        `;
        tbody.appendChild(row);
      });
    }

    function countdown() {
      document.getElementById("timer").innerText = timeLeft;
      if (timeLeft <= 0) {
        let randomNum = Math.floor(Math.random() * 10);
        let outcome = randomNum <= 4 ? 'small' : 'big';
        let msg = "·Äë·ÄΩ·ÄÄ·Ä∫·Äú·Ä¨·Äû·Ää·Ä∑·Ä∫·ÄÇ·Äè·Äî·Ä∫·Ä∏: " + randomNum + " ‚Üí ";
        let historyResult = "";

        if(!bet){
          msg += "‚ùå Bet ·Äô·Äú·ÄØ·Äï·Ä∫·Äë·Ä¨·Ä∏·Äï·Ä´";
        } else {
          balance -= bet.amount;
          if(bet.type === 'number'){
            if(bet.value === randomNum){
              let win = bet.amount * 10;
              balance += win;
              msg += "‚úîÔ∏è Win (·Äê·Ä≠·ÄÄ·Äª) +" + win;
              historyResult = "Win +" + win;
            } else {
              msg += "‚ùå Lose -" + bet.amount;
              historyResult = "Lose -" + bet.amount;
            }
          } else if(bet.type === outcome){
            let win = bet.amount * 2;
            balance += win;
            msg += "‚úîÔ∏è Win +" + win;
            historyResult = "Win +" + win;
          } else {
            msg += "‚ùå Lose -" + bet.amount;
            historyResult = "Lose -" + bet.amount;
          }

          addHistory(
            bet.type==='number' ? "·ÄÇ·Äè·Äî·Ä∫·Ä∏ " + bet.value : (bet.type==='small' ? "·Ä°·Äû·Ä±·Ä∏" : "·Ä°·ÄÄ·Äº·ÄÆ·Ä∏"),
            bet.amount, randomNum, historyResult
          );
        }

        document.getElementById("result").innerText = msg;
        updateBalance();
        timeLeft = currentMode;
        bet = null;
      }
      timeLeft--;
    }

    setInterval(countdown, 1000);
  </script>
</body>
</html>
