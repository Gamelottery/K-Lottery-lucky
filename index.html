<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BigWin Game - Lottery Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, get, push, onValue, update, remove } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        import { getAuth, signInAnonymously, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "demo-api-key",
            authDomain: "bigwin-game-demo.firebaseapp.com",
            databaseURL: "https://bigwin-game-demo-default-rtdb.firebaseio.com",
            projectId: "bigwin-game-demo",
            storageBucket: "bigwin-game-demo.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:demo123456789"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const auth = getAuth(app);
        
        // Make Firebase available globally
        window.firebase = {
            database,
            auth,
            ref,
            set,
            get,
            push,
            onValue,
            update,
            remove,
            signInAnonymously,
            onAuthStateChanged
        };
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Poppins', sans-serif; 
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            min-height: 100vh;
        }
        
        .lottery-ball {
            position: relative;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.3) 40%, transparent 70%),
                        linear-gradient(145deg, #ffffff 0%, #e5e7eb 100%);
            box-shadow: 0 12px 30px rgba(0,0,0,0.25), 
                        inset 0 4px 8px rgba(255,255,255,0.9),
                        inset 0 -2px 4px rgba(0,0,0,0.1);
            border: 2px solid rgba(255,255,255,0.3);
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            font-weight: 900;
            letter-spacing: 1px;
        }
        
        .lottery-ball.red { 
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.3) 40%, transparent 70%),
                        linear-gradient(145deg, #ff4757 0%, #c44569 100%);
            color: white; 
        }
        
        .lottery-ball.blue { 
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.3) 40%, transparent 70%),
                        linear-gradient(145deg, #3742fa 0%, #2f3542 100%);
            color: white; 
        }
        
        .lottery-ball.green { 
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.3) 40%, transparent 70%),
                        linear-gradient(145deg, #2ed573 0%, #1e90ff 100%);
            color: white; 
        }
        
        .lottery-ball.purple { 
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.3) 40%, transparent 70%),
                        linear-gradient(145deg, #a55eea 0%, #8854d0 100%);
            color: white; 
        }
        
        .lottery-ball:hover {
            transform: translateY(-3px) scale(1.05);
        }
        
        .number-btn {
            background: linear-gradient(145deg, #ffffff 0%, #f9fafb 100%);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
            border: 2px solid #e5e7eb;
        }
        
        .number-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
        }
        
        .number-btn.selected {
            background: linear-gradient(145deg, #10b981 0%, #059669 100%);
            color: white;
            border-color: #047857;
            transform: scale(0.95);
        }
        
        .multiplier-btn {
            background: linear-gradient(145deg, #fbbf24 0%, #f59e0b 100%);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }
        
        .multiplier-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .multiplier-btn.selected {
            background: linear-gradient(145deg, #dc2626 0%, #b91c1c 100%);
            transform: scale(0.95);
        }
        
        .big-small-btn {
            transition: all 0.3s ease;
        }
        
        .big-small-btn:hover {
            transform: translateY(-3px);
        }
        
        .big-small-btn.selected {
            transform: scale(0.95);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border: 3px solid #fbbf24;
        }
        
        .game-card {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .admin-panel {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
        }

        .request-card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .request-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .status-pending {
            background: linear-gradient(145deg, #fbbf24, #f59e0b);
            color: white;
        }

        .status-approved {
            background: linear-gradient(145deg, #10b981, #059669);
            color: white;
        }

        .status-rejected {
            background: linear-gradient(145deg, #ef4444, #dc2626);
            color: white;
        }
    </style>
</head>
<body class="overflow-x-hidden min-h-screen">
    <!-- Top Navigation -->
    <div class="bg-white shadow-lg sticky top-0 z-50">
        <div class="flex items-center justify-between p-4">
            <div class="flex items-center space-x-3">
                <div class="text-xl">üêâ</div>
                <div>
                    <h1 class="text-xl font-bold text-gray-800">BigWin Game</h1>
                    <p class="text-xs text-gray-500">Lottery Platform</p>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <!-- Firebase Status -->
                <div id="firebase-status" class="flex items-center space-x-1 text-xs">
                    <div class="w-2 h-2 bg-yellow-500 rounded-full animate-pulse"></div>
                    <span class="text-gray-600">·ÄÅ·Äª·Ä≠·Äê·Ä∫·ÄÜ·ÄÄ·Ä∫·Äî·Ä±...</span>
                </div>
                
                <!-- Admin Access Button -->
                <button onclick="showAdminLogin()" class="bg-gray-200 hover:bg-gray-300 p-2 rounded-full transition-all">
                    <span class="text-xl">‚öôÔ∏è</span>
                </button>
            </div>
        </div>
        
        <!-- Money Display Section -->
        <div class="bg-gradient-to-r from-emerald-500 to-green-600 text-white py-4">
            <div class="text-center mb-3">
                <div class="text-2xl font-bold" id="balance-display">
                    üí∞ 10,000 Ks
                </div>
                <div class="text-sm opacity-90">·Äú·ÄÄ·Ä∫·ÄÄ·Äª·Äî·Ä∫·ÄÑ·ÄΩ·Ä±</div>
            </div>
            <div class="flex justify-center space-x-4 mb-2">
                <button onclick="showDepositModal()" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-6 py-2 rounded-full font-semibold transition-all">
                    üì• ·ÄÑ·ÄΩ·Ä±·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏
                </button>
                <button onclick="showWithdrawModal()" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-6 py-2 rounded-full font-semibold transition-all">
                    üì§ ·ÄÑ·ÄΩ·Ä±·Äë·ÄØ·Äê·Ä∫
                </button>
            </div>
        </div>
        
        <!-- Game Title -->
        <div class="bg-gradient-to-r from-purple-600 to-purple-700 text-white py-3 px-4">
            <div class="text-center">
                <h2 class="text-xl font-bold">üéØ Win Go 1 Minute</h2>
                <p class="text-sm opacity-90">·Äô·Ä≠·Äî·ÄÖ·Ä∫·Äê·ÄÖ·Ä∫·Äô·Ä≠·Äî·ÄÖ·Ä∫ ·Äë·ÄÆ·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÄ·ÄÖ·Ä¨·Ä∏</p>
            </div>
        </div>

        <!-- Game Timer Display -->
        <div class="bg-gradient-to-r from-red-500 to-red-600 text-white py-4 px-4">
            <div class="text-center">
                <div class="text-xs opacity-80 mb-1">·Äï·ÄΩ·Ä≤·ÄÖ·Ä•·Ä∫·Äî·Ä∂·Äï·Ä´·Äê·Ä∫ <span id="round-number">#·Åà·ÅÖ·ÅÜ</span></div>
                <div class="text-4xl font-bold pulse-animation mb-2" id="timer-text">01:00</div>
                <div class="text-sm opacity-90 mb-3">·Äú·ÄÄ·Ä∫·ÄÄ·Äª·Äî·Ä∫·ÄÅ·Äª·Ä≠·Äî·Ä∫</div>
                
                <!-- Recent Numbers -->
                <div class="flex justify-center space-x-2 mb-3" id="recent-numbers">
                    <div class="lottery-ball green w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold">3</div>
                    <div class="lottery-ball red w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold">6</div>
                    <div class="lottery-ball purple w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold">0</div>
                    <div class="lottery-ball red w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold">4</div>
                    <div class="lottery-ball purple w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold">5</div>
                </div>
                
                <!-- Quick Color Betting -->
                <div class="flex justify-center space-x-2">
                    <button id="red-btn" class="big-small-btn bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-bold py-2 px-3 rounded-lg text-xs shadow-lg transition-all flex items-center space-x-1" onclick="selectColor('red')">
                        <div class="text-sm">üíé</div>
                        <div class="text-xs">·Ä°·Äî·ÄÆ</div>
                    </button>
                    <button id="green-btn" class="big-small-btn bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-bold py-2 px-3 rounded-lg text-xs shadow-lg transition-all flex items-center space-x-1" onclick="selectColor('green')">
                        <div class="text-sm">üçÄ</div>
                        <div class="text-xs">·Ä°·ÄÖ·Ä≠·Äô·Ä∫·Ä∏</div>
                    </button>
                    <button id="purple-btn" class="big-small-btn bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-bold py-2 px-3 rounded-lg text-xs shadow-lg transition-all flex items-center space-x-1" onclick="selectColor('purple')">
                        <div class="text-sm">üëë</div>
                        <div class="text-xs">·ÄÅ·Äõ·Äô·Ä∫·Ä∏</div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="p-2 space-y-4 pb-20 min-h-screen">

        <!-- Big/Small Betting Section -->
        <div class="game-card rounded-2xl p-6">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                üéØ ·Ä°·ÄÄ·Äº·ÄÆ·Ä∏/·Ä°·Äû·Ä±·Ä∏ ·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÄ·ÄÖ·Ä¨·Ä∏
                <span class="ml-auto text-sm text-green-600 font-bold">x1.95 ·ÄÜ·ÄØ·ÄÄ·Äº·Ä±·Ä∏</span>
            </h2>
            
            <div class="flex justify-center space-x-4 mb-4">
                <button id="big-btn" class="big-small-btn bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold py-6 px-8 rounded-2xl shadow-lg transition-all transform hover:scale-105 flex-1 max-w-xs" onclick="selectBigSmall('big')">
                    <div class="text-lg font-bold">·Ä°·ÄÄ·Äº·ÄÆ·Ä∏</div>
                </button>
                <button id="small-btn" class="big-small-btn bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold py-6 px-8 rounded-2xl shadow-lg transition-all transform hover:scale-105 flex-1 max-w-xs" onclick="selectBigSmall('small')">
                    <div class="text-lg font-bold">·Ä°·Äû·Ä±·Ä∏</div>
                </button>
            </div>
        </div>

        <!-- Number Selection Grid -->
        <div class="game-card rounded-2xl p-6">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                üî¢ ·Äî·Ä∂·Äï·Ä´·Äê·Ä∫·Äõ·ÄΩ·Ä±·Ä∏·ÄÅ·Äª·Äö·Ä∫·Äô·Äæ·ÄØ
                <span class="ml-auto text-sm text-purple-600 font-bold">x9.5 ·ÄÜ·ÄØ·ÄÄ·Äº·Ä±·Ä∏</span>
            </h2>
            <div class="grid grid-cols-5 gap-3 mb-4">
                <button id="num-0" class="number-btn h-16 rounded-xl font-bold text-lg flex items-center justify-center lottery-ball purple" onclick="selectNumber(0)">0</button>
                <button id="num-1" class="number-btn h-16 rounded-xl font-bold text-lg flex items-center justify-center lottery-ball green" onclick="selectNumber(1)">1</button>
                <button id="num-2" class="number-btn h-16 rounded-xl font-bold text-lg flex items-center justify-center lottery-ball red" onclick="selectNumber(2)">2</button>
                <button id="num-3" class="number-btn h-16 rounded-xl font-bold text-lg flex items-center justify-center lottery-ball green" onclick="selectNumber(3)">3</button>
                <button id="num-4" class="number-btn h-16 rounded-xl font-bold text-lg flex items-center justify-center lottery-ball red" onclick="selectNumber(4)">4</button>
                <button id="num-5" class="number-btn h-16 rounded-xl font-bold text-lg flex items-center justify-center lottery-ball purple" onclick="selectNumber(5)">5</button>
                <button id="num-6" class="number-btn h-16 rounded-xl font-bold text-lg flex items-center justify-center lottery-ball red" onclick="selectNumber(6)">6</button>
                <button id="num-7" class="number-btn h-16 rounded-xl font-bold text-lg flex items-center justify-center lottery-ball green" onclick="selectNumber(7)">7</button>
                <button id="num-8" class="number-btn h-16 rounded-xl font-bold text-lg flex items-center justify-center lottery-ball red" onclick="selectNumber(8)">8</button>
                <button id="num-9" class="number-btn h-16 rounded-xl font-bold text-lg flex items-center justify-center lottery-ball green" onclick="selectNumber(9)">9</button>
            </div>
        </div>

        <!-- Multiplier Selection -->
        <div class="game-card rounded-2xl p-6">
            <h2 class="text-lg font-bold text-gray-800 mb-4">üí∞ ·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÑ·ÄΩ·Ä±·Äï·Äô·Ä¨·Äè</h2>
            <div class="grid grid-cols-4 gap-3 mb-4">
                <button class="multiplier-btn text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all transform hover:scale-105" onclick="selectMultiplier(1)">
                    <div class="text-sm">üíé</div>
                    <div class="text-xs">100 Ks</div>
                </button>
                <button class="multiplier-btn text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all transform hover:scale-105" onclick="selectMultiplier(5)">
                    <div class="text-sm">üíé</div>
                    <div class="text-xs">500 Ks</div>
                </button>
                <button class="multiplier-btn text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all transform hover:scale-105" onclick="selectMultiplier(10)">
                    <div class="text-sm">üî•</div>
                    <div class="text-xs">1K</div>
                </button>
                <button class="multiplier-btn text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all transform hover:scale-105" onclick="selectMultiplier(50)">
                    <div class="text-sm">üî•</div>
                    <div class="text-xs">5K</div>
                </button>
                <button class="multiplier-btn text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all transform hover:scale-105" onclick="selectMultiplier(100)">
                    <div class="text-sm">üëë</div>
                    <div class="text-xs">10K</div>
                </button>
                <button class="multiplier-btn text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all transform hover:scale-105" onclick="selectMultiplier(500)">
                    <div class="text-sm">üëë</div>
                    <div class="text-xs">50K</div>
                </button>
                <button class="multiplier-btn text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all transform hover:scale-105" onclick="selectMultiplier(1000)">
                    <div class="text-sm">üí∞</div>
                    <div class="text-xs">100K</div>
                </button>
                <button class="multiplier-btn text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all transform hover:scale-105" onclick="selectMultiplier(5000)">
                    <div class="text-sm">üí∞</div>
                    <div class="text-xs">500K</div>
                </button>
            </div>
        </div>

        <!-- Selection Display -->
        <div class="game-card rounded-2xl p-6" id="selection-display" style="display: none;">
            <h2 class="text-lg font-bold text-gray-800 mb-4">üìã ·Äû·ÄÑ·Ä∑·Ä∫·Äõ·ÄΩ·Ä±·Ä∏·ÄÅ·Äª·Äö·Ä∫·Äô·Äæ·ÄØ</h2>
            <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-4">
                <div class="text-center">
                    <div class="text-lg font-bold text-gray-800" id="selection-text">·Äõ·ÄΩ·Ä±·Ä∏·ÄÅ·Äª·Äö·Ä∫·Äô·Äæ·ÄØ·Äô·Äõ·Äæ·Ä≠·Äû·Ä±·Ä∏·Äï·Ä´</div>
                    <div class="text-2xl font-bold text-green-600 mt-2" id="bet-amount-text">0 ·ÄÄ·Äª·Äï·Ä∫</div>
                </div>
            </div>
            <div class="flex space-x-3">
                <button onclick="confirmBet()" class="flex-1 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center space-x-2">
                    <span class="text-xl">‚úÖ</span>
                    <span>·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äô·Ää·Ä∫</span>
                </button>
                <button onclick="cancelBet()" class="flex-1 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center space-x-2">
                    <span class="text-xl">‚ùå</span>
                    <span>·Äï·Äö·Ä∫·Äñ·Äª·ÄÄ·Ä∫·Äô·Ää·Ä∫</span>
                </button>
            </div>
        </div>

        <!-- Latest Winning Numbers -->
        <div class="game-card rounded-2xl p-6">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                üèÜ ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·ÄÜ·ÄØ·Ä∂·Ä∏·Äë·ÄΩ·ÄÄ·Ä∫·Äû·Ä±·Ä¨·Äî·Ä∂·Äï·Ä´·Äê·Ä∫·Äô·Äª·Ä¨·Ä∏
                <span class="ml-auto text-sm text-gray-500">#·Ä°·ÄÄ·Äº·Ä≠·Äô·Ä∫ ·ÅÅ·ÅÇ·ÅÑ·Åá</span>
            </h2>
            <div class="flex justify-center items-center space-x-6 mb-4">
                <div class="lottery-ball green w-20 h-20 rounded-full flex items-center justify-center text-2xl font-bold">7</div>
                <div class="text-3xl text-red-600">üî¥</div>
                <div class="flex flex-col items-center">
                    <div class="text-xl font-bold text-red-600">·Ä°·ÄÄ·Äº·ÄÆ·Ä∏</div>
                    <div class="text-sm text-gray-600">(5-9)</div>
                </div>
            </div>
            <div class="text-center text-sm text-gray-600">
                üí∞ ·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏·ÄÜ·ÄØ·ÄÄ·Äº·Ä±·Ä∏: <span class="font-bold text-green-600">·ÅÅ·ÅÇ·ÅÖ,·ÅÑ·ÅÉ·ÅÄ,·ÅÄ·ÅÄ·ÅÄ ·ÄÄ·Äª·Äï·Ä∫</span>
            </div>
        </div>
    </div>

    <script>
        let selectedChoice = null;
        let selectedMultiplier = 1;
        let baseBet = 100;
        let timerInterval;
        let countdownTimer = 60;
        let roundNumber = 856;
        
        let gameResults = [];
        let gameNumberSequence = [3, 6, 0, 4, 5, 1, 7, 9, 2, 8];

        // Admin and Financial System
        let isAdminLoggedIn = false;
        let adminPassword = 'admin123';
        
        // Financial requests storage
        let depositRequests = [];
        let withdrawRequests = [];
        let userBalances = { 'user1': 10000 }; // Demo user balance
        
        // Current user (Firebase authenticated)
        let currentUserId = null;
        let firebaseUser = null;

        let bettingHistory = [];
        let currentRoundBets = [];

        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                countdownTimer--;
                updateTimerDisplay();
                
                if (countdownTimer <= 0) {
                    countdownTimer = 60;
                    simulateNewDraw();
                    roundNumber++;
                    document.getElementById('round-number').textContent = `#${roundNumber}`;
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(countdownTimer / 60);
            const seconds = countdownTimer % 60;
            const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timer-text').textContent = display;
        }

        function selectBigSmall(choice) {
            if (countdownTimer <= 10) {
                alert('‚ùå ·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫·Äî·Ää·Ä∫·Ä∏·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫! ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äï·ÄΩ·Ä≤·ÄÖ·Ä•·Ä∫·Äê·ÄΩ·ÄÑ·Ä∫ ·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äï·Ä´·Åã');
                return;
            }
            
            document.querySelectorAll('.big-small-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelectorAll('.number-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            if (choice === 'big') {
                document.getElementById('big-btn').classList.add('selected');
                selectedChoice = 'big';
            } else {
                document.getElementById('small-btn').classList.add('selected');
                selectedChoice = 'small';
            }
            
            updateSelectionDisplay();
            updateBetAmount();
        }

        function selectColor(color) {
            if (countdownTimer <= 10) {
                alert('‚ùå ·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫·Äî·Ää·Ä∫·Ä∏·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫! ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äï·ÄΩ·Ä≤·ÄÖ·Ä•·Ä∫·Äê·ÄΩ·ÄÑ·Ä∫ ·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äï·Ä´·Åã');
                return;
            }
            
            document.querySelectorAll('.big-small-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelectorAll('.number-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            if (color === 'red') {
                document.getElementById('red-btn').classList.add('selected');
                selectedChoice = 'red';
            } else if (color === 'green') {
                document.getElementById('green-btn').classList.add('selected');
                selectedChoice = 'green';
            } else if (color === 'purple') {
                document.getElementById('purple-btn').classList.add('selected');
                selectedChoice = 'purple';
            }
            
            updateSelectionDisplay();
            updateBetAmount();
        }

        function selectNumber(number) {
            if (countdownTimer <= 10) {
                alert('‚ùå ·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫·Äî·Ää·Ä∫·Ä∏·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫! ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äï·ÄΩ·Ä≤·ÄÖ·Ä•·Ä∫·Äê·ÄΩ·ÄÑ·Ä∫ ·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äï·Ä´·Åã');
                return;
            }
            
            document.querySelectorAll('.number-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            document.querySelectorAll('.big-small-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            document.getElementById(`num-${number}`).classList.add('selected');
            selectedChoice = `number-${number}`;
            
            updateSelectionDisplay();
            updateBetAmount();
        }

        function selectMultiplier(multiplier) {
            document.querySelectorAll('.multiplier-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            event.target.classList.add('selected');
            selectedMultiplier = multiplier;
            updateBetAmount();
        }

        function updateSelectionDisplay() {
            const display = document.getElementById('selection-display');
            const selectionText = document.getElementById('selection-text');
            
            if (selectedChoice) {
                display.style.display = 'block';
                
                if (selectedChoice === 'big') {
                    selectionText.textContent = 'üî¥ ·Ä°·ÄÄ·Äº·ÄÆ·Ä∏ (5-9)';
                } else if (selectedChoice === 'small') {
                    selectionText.textContent = 'üîµ ·Ä°·Äû·Ä±·Ä∏ (0-4)';
                } else if (selectedChoice === 'red') {
                    selectionText.textContent = 'üíé ·Ä°·Äî·ÄÆ·Äõ·Ä±·Ä¨·ÄÑ·Ä∫ (2,4,6,8)';
                } else if (selectedChoice === 'green') {
                    selectionText.textContent = 'üçÄ ·Ä°·ÄÖ·Ä≠·Äô·Ä∫·Ä∏·Äõ·Ä±·Ä¨·ÄÑ·Ä∫ (1,3,7,9)';
                } else if (selectedChoice === 'purple') {
                    selectionText.textContent = 'üëë ·ÄÅ·Äõ·Äô·Ä∫·Ä∏·Äõ·Ä±·Ä¨·ÄÑ·Ä∫ (0,5)';
                } else if (selectedChoice.startsWith('number-')) {
                    const number = selectedChoice.split('-')[1];
                    selectionText.textContent = `üéØ ·Äî·Ä∂·Äï·Ä´·Äê·Ä∫ ${number}`;
                }
            } else {
                display.style.display = 'none';
            }
        }

        function updateBetAmount() {
            const betAmountText = document.getElementById('bet-amount-text');
            if (betAmountText) {
                const totalBet = baseBet * selectedMultiplier;
                betAmountText.textContent = `${totalBet.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫`;
            }
        }

        function confirmBet() {
            if (!selectedChoice) {
                alert('‚ùå ·Äõ·ÄΩ·Ä±·Ä∏·ÄÅ·Äª·Äö·Ä∫·Äô·Äæ·ÄØ·Äô·Äõ·Äæ·Ä≠·Äï·Ä´!');
                return;
            }
            
            if (countdownTimer <= 10) {
                alert('‚ùå ·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫·Äî·Ää·Ä∫·Ä∏·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫! ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äï·ÄΩ·Ä≤·ÄÖ·Ä•·Ä∫·Äê·ÄΩ·ÄÑ·Ä∫ ·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äï·Ä´·Åã');
                return;
            }
            
            const betAmount = baseBet * selectedMultiplier;
            const currentBalance = getCurrentBalance();
            
            if (betAmount > currentBalance) {
                alert(`‚ùå ·Äú·ÄÄ·Ä∫·ÄÄ·Äª·Äî·Ä∫·ÄÑ·ÄΩ·Ä± ·Äô·Äú·ÄØ·Ä∂·Äú·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Ä´! ·Äú·Ä≠·ÄØ·Ä°·Äï·Ä∫·Äû·Ää·Ä∫: ${betAmount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫`);
                return;
            }
            
            const newBalance = currentBalance - betAmount;
            updateBalance(newBalance);
            
            let choiceText = '';
            if (selectedChoice === 'big') choiceText = '·Ä°·ÄÄ·Äº·ÄÆ·Ä∏';
            else if (selectedChoice === 'small') choiceText = '·Ä°·Äû·Ä±·Ä∏';
            else if (selectedChoice === 'red') choiceText = '·Ä°·Äî·ÄÆ·Äõ·Ä±·Ä¨·ÄÑ·Ä∫';
            else if (selectedChoice === 'green') choiceText = '·Ä°·ÄÖ·Ä≠·Äô·Ä∫·Ä∏·Äõ·Ä±·Ä¨·ÄÑ·Ä∫';
            else if (selectedChoice === 'purple') choiceText = '·ÄÅ·Äõ·Äô·Ä∫·Ä∏·Äõ·Ä±·Ä¨·ÄÑ·Ä∫';
            else if (selectedChoice.startsWith('number-')) {
                const number = selectedChoice.split('-')[1];
                choiceText = `·Äî·Ä∂·Äï·Ä´·Äê·Ä∫ ${number}`;
            }
            
            addBetToCurrentRound(selectedChoice, betAmount, choiceText);
            
            // Save bet to Firebase
            const betData = {
                choice: selectedChoice,
                amount: betAmount,
                choiceText: choiceText,
                round: roundNumber,
                time: new Date().toLocaleTimeString('my-MM', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                })
            };
            saveBetToFirebase(betData);
            
            showSuccessMessage(betAmount, choiceText);
            
            setTimeout(() => {
                cancelBet();
            }, 2000);
        }

        function showSuccessMessage(betAmount, choice) {
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 99999;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            const successIcon = document.createElement('div');
            successIcon.style.cssText = `
                background: white;
                border-radius: 24px;
                padding: 32px;
                text-align: center;
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
                transform: scale(0.5);
                transition: transform 0.5s ease;
                max-width: 320px;
                margin: 16px;
            `;
            
            successIcon.innerHTML = `
                <div style="font-size: 80px; margin-bottom: 16px; animation: bounce 1s infinite;">
                    <div style="position: relative; display: inline-block;">
                        <div style="color: #10b981;">‚úÖ</div>
                        <div style="position: absolute; top: -8px; left: 50%; transform: translateX(-50%); font-size: 24px; animation: pulse 2s infinite;">‚ú®</div>
                    </div>
                </div>
                <div style="font-size: 28px; font-weight: bold; color: #10b981; margin-bottom: 12px;">üéâ ·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÄ·ÄÖ·Ä¨·Ä∏·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫! üéâ</div>
                <div style="font-size: 18px; color: #374151; margin-bottom: 8px;">·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÑ·ÄΩ·Ä±: ${betAmount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫</div>
                <div style="font-size: 18px; color: #374151; margin-bottom: 16px;">·Äõ·ÄΩ·Ä±·Ä∏·ÄÅ·Äª·Äö·Ä∫·Äô·Äæ·ÄØ: ${choice}</div>
                <div style="font-size: 14px; color: #6b7280;">·Äõ·Äú·Äí·Ä∫·ÄÄ·Ä≠·ÄØ ·ÄÖ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·Äï·Ä´...</div>
            `;
            
            overlay.appendChild(successIcon);
            document.body.appendChild(overlay);
            
            overlay.offsetHeight;
            overlay.style.opacity = '1';
            
            setTimeout(() => {
                successIcon.style.transform = 'scale(1)';
            }, 50);
            
            overlay.addEventListener('click', () => {
                overlay.style.opacity = '0';
                setTimeout(() => {
                    if (document.body.contains(overlay)) {
                        document.body.removeChild(overlay);
                    }
                }, 300);
            });
            
            setTimeout(() => {
                if (document.body.contains(overlay)) {
                    overlay.style.opacity = '0';
                    setTimeout(() => {
                        if (document.body.contains(overlay)) {
                            document.body.removeChild(overlay);
                        }
                    }, 300);
                }
            }, 3000);
        }

        function cancelBet() {
            selectedChoice = null;
            selectedMultiplier = 1;
            
            document.querySelectorAll('.big-small-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelectorAll('.number-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelectorAll('.multiplier-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            document.getElementById('selection-display').style.display = 'none';
        }

        function simulateNewDraw() {
            processCurrentRoundResults();
            
            const sequenceIndex = gameResults.length % gameNumberSequence.length;
            const winningNumber = gameNumberSequence[sequenceIndex];
            
            gameResults.push(winningNumber);
            
            // Save result to Firebase
            saveGameResultToFirebase(winningNumber);
            
            const isBig = winningNumber >= 5;
            const isRed = [2, 4, 6, 8].includes(winningNumber);
            const isGreen = [1, 3, 7, 9].includes(winningNumber);
            const isPurple = [0, 5].includes(winningNumber);
            
            let ballColor;
            if (isRed) ballColor = 'red';
            else if (isGreen) ballColor = 'green';
            else if (isPurple) ballColor = 'purple';
            else ballColor = isBig ? 'red' : 'blue';
            
            const resultText = isBig ? '·Ä°·ÄÄ·Äº·ÄÆ·Ä∏' : '·Ä°·Äû·Ä±·Ä∏';
            
            const ballsContainer = document.querySelector('.game-card .flex.justify-center.items-center.space-x-6');
            ballsContainer.innerHTML = `
                <div class="lottery-ball ${ballColor} w-20 h-20 rounded-full flex items-center justify-center text-2xl font-bold">${winningNumber}</div>
                <div class="text-3xl ${isBig ? 'text-red-600' : 'text-blue-600'}">${isBig ? 'üî¥' : 'üîµ'}</div>
                <div class="flex flex-col items-center">
                    <div class="text-xl font-bold ${isBig ? 'text-red-600' : 'text-blue-600'}">${resultText}</div>
                    <div class="text-sm text-gray-600">${isBig ? '(5-9)' : '(0-4)'}</div>
                    ${isRed ? '<div class="text-sm text-red-600 font-bold">üíé ·Ä°·Äî·ÄÆ·Äõ·Ä±·Ä¨·ÄÑ·Ä∫</div>' : ''}
                    ${isGreen ? '<div class="text-sm text-green-600 font-bold">üçÄ ·Ä°·ÄÖ·Ä≠·Äô·Ä∫·Ä∏·Äõ·Ä±·Ä¨·ÄÑ·Ä∫</div>' : ''}
                    ${isPurple ? '<div class="text-sm text-purple-600 font-bold">üëë ·ÄÅ·Äõ·Äô·Ä∫·Ä∏·Äõ·Ä±·Ä¨·ÄÑ·Ä∫</div>' : ''}
                </div>
            `;
            
            updateRecentNumbers(winningNumber, ballColor);
            processBettingResults(winningNumber, isBig, isRed, isGreen, isPurple, resultText, ballColor);
            
            currentRoundBets = [];
        }

        function updateRecentNumbers(newNumber, ballColor) {
            const recentContainer = document.getElementById('recent-numbers');
            
            const newNumberElement = `<div class="lottery-ball ${ballColor} w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold">${newNumber}</div>`;
            
            const currentNumbers = recentContainer.children;
            const numbersArray = Array.from(currentNumbers).map(el => el.outerHTML);
            
            numbersArray.unshift(newNumberElement);
            if (numbersArray.length > 5) {
                numbersArray.pop();
            }
            
            recentContainer.innerHTML = numbersArray.join('');
        }

        function processBettingResults(winningNumber, isBig, isRed, isGreen, isPurple, resultText, ballColor) {
            let totalWinnings = 0;
            
            currentRoundBets.forEach(bet => {
                let isWin = false;
                let multiplier = 1.95;
                
                if (bet.choice === 'big' && isBig) {
                    isWin = true;
                } else if (bet.choice === 'small' && !isBig) {
                    isWin = true;
                } else if (bet.choice === 'red' && isRed) {
                    isWin = true;
                    multiplier = 2.0;
                } else if (bet.choice === 'green' && isGreen) {
                    isWin = true;
                    multiplier = 2.0;
                } else if (bet.choice === 'purple' && isPurple) {
                    isWin = true;
                    multiplier = 4.5;
                } else if (bet.choice === `number-${winningNumber}`) {
                    isWin = true;
                    multiplier = 9.5;
                }
                
                if (isWin) {
                    const winAmount = Math.floor(bet.amount * multiplier);
                    totalWinnings += winAmount;
                    
                    const currentBalance = getCurrentBalance();
                    updateBalance(currentBalance + winAmount);
                    
                    setTimeout(() => {
                        showWinLoseIcon('win', winAmount, winningNumber, resultText);
                    }, 1000);
                } else {
                    setTimeout(() => {
                        showWinLoseIcon('lose', bet.amount, winningNumber, resultText);
                    }, 1500);
                }
                
                addToBettingHistory(bet, isWin, isWin ? Math.floor(bet.amount * multiplier) : 0, winningNumber, resultText);
            });
        }

        function showWinLoseIcon(result, amount, winningNumber, resultText) {
            const overlay = document.createElement('div');
            overlay.className = 'fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50';
            overlay.style.zIndex = '9999';
            
            const iconContainer = document.createElement('div');
            iconContainer.className = 'bg-white rounded-3xl p-12 text-center shadow-2xl transform scale-0 transition-all duration-700 max-w-sm mx-4';
            
            if (result === 'win') {
                iconContainer.innerHTML = `
                    <div class="text-9xl mb-6 relative animate-bounce">
                        <div class="relative inline-block">
                            <div class="text-green-500">üéâ</div>
                            <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 text-3xl animate-pulse">‚ú®</div>
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-green-600 mb-4">üèÜ ·Äû·ÄÑ·Ä∫·Ä°·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Äõ·Äõ·Äæ·Ä≠·Äï·Ä´·Äû·Ää·Ä∫ üèÜ</div>
                    <div class="text-xl text-gray-700 mb-2">·Äî·Ä∂·Äï·Ä´·Äê·Ä∫: ${winningNumber} (${resultText})</div>
                    <div class="text-2xl font-bold text-green-600 mb-2">+ ${amount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫</div>
                    <div class="text-lg text-gray-600 mt-2">·ÄÄ·Ä∂·ÄÄ·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äï·Ä´·Äê·Äö·Ä∫! üçÄ</div>
                `;
            } else {
                iconContainer.innerHTML = `
                    <div class="text-9xl mb-6">
                        <div class="relative inline-block">
                            <div class="text-red-500">üíî</div>
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-red-600 mb-4">üòû ·Äû·ÄÑ·Ä∫·ÄÄ·Äª·Äõ·Äæ·ÄØ·Ä∂·Ä∏·Äï·Ä´·Äû·Ää·Ä∫ üòû</div>
                    <div class="text-xl text-gray-700 mb-2">·Äî·Ä∂·Äï·Ä´·Äê·Ä∫: ${winningNumber} (${resultText})</div>
                    <div class="text-2xl font-bold text-red-600 mb-2">- ${amount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫</div>
                    <div class="text-lg text-gray-500 mt-2">·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äê·ÄÖ·Ä∫·ÄÄ·Äº·Ä≠·Äô·Ä∫ ·ÄÄ·Ä∂·ÄÄ·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äï·Ä´·ÄÖ·Ä±! üôè</div>
                `;
            }
            
            overlay.appendChild(iconContainer);
            document.body.appendChild(overlay);
            
            setTimeout(() => {
                iconContainer.classList.remove('scale-0');
                iconContainer.classList.add('scale-100');
            }, 200);
            
            overlay.addEventListener('click', () => {
                overlay.classList.add('opacity-0');
                setTimeout(() => {
                    if (document.body.contains(overlay)) {
                        document.body.removeChild(overlay);
                    }
                }, 300);
            });
            
            setTimeout(() => {
                if (document.body.contains(overlay)) {
                    overlay.classList.add('opacity-0');
                    setTimeout(() => {
                        if (document.body.contains(overlay)) {
                            document.body.removeChild(overlay);
                        }
                    }, 300);
                }
            }, 4000);
        }

        function addBetToCurrentRound(choice, amount, choiceText) {
            const bet = {
                id: Date.now(),
                choice: choice,
                amount: amount,
                choiceText: choiceText,
                time: new Date().toLocaleTimeString('my-MM', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                }),
                round: roundNumber
            };
            
            currentRoundBets.push(bet);
        }

        function addToBettingHistory(bet, isWin, winAmount, winningNumber, resultText) {
            const historyEntry = {
                id: bet.id,
                round: bet.round,
                choice: bet.choiceText,
                betAmount: bet.amount,
                isWin: isWin,
                winAmount: winAmount,
                winningNumber: winningNumber,
                result: resultText,
                time: bet.time,
                date: new Date().toLocaleDateString('my-MM')
            };
            
            bettingHistory.unshift(historyEntry);
            
            if (bettingHistory.length > 50) {
                bettingHistory = bettingHistory.slice(0, 50);
            }
        }

        function processCurrentRoundResults() {
            // Results processed in simulateNewDraw
        }

        function getCurrentBalance() {
            return userBalances[currentUserId] || 0;
        }

        function updateBalance(newBalance) {
            userBalances[currentUserId] = newBalance;
            document.getElementById('balance-display').textContent = `üí∞ ${newBalance.toLocaleString()} Ks`;
            
            // Save to Firebase
            if (currentUserId) {
                saveUserBalance(currentUserId, newBalance);
            }
        }

        // ==================== ADMIN SYSTEM ====================

        function showAdminLogin() {
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 99999;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                background: white;
                border-radius: 20px;
                padding: 32px;
                text-align: center;
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
                transform: scale(0.5);
                transition: transform 0.5s ease;
                max-width: 400px;
                width: 90%;
            `;
            
            modal.innerHTML = `
                <div style="font-size: 48px; margin-bottom: 16px;">üîê</div>
                <div style="font-size: 24px; font-weight: bold; color: #374151; margin-bottom: 20px;">
                    Admin Panel ·Äù·ÄÑ·Ä∫·Äõ·Ä±·Ä¨·ÄÄ·Ä∫·Äõ·Äî·Ä∫
                </div>
                <div style="margin-bottom: 20px;">
                    <input type="password" id="admin-password" placeholder="·Äú·Äª·Äæ·Ä≠·ÄØ·Ä∑·Äù·Äæ·ÄÄ·Ä∫·ÄÄ·ÄØ·Äí·Ä∫ ·Äõ·Ä≠·ÄØ·ÄÄ·Ä∫·Äë·Ää·Ä∑·Ä∫·Äï·Ä´" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px; text-align: center;" onkeypress="if(event.key==='Enter') adminLogin()">
                </div>
                <div style="display: flex; gap: 12px;">
                    <button onclick="adminLogin()" style="flex: 1; background: linear-gradient(145deg, #10b981, #059669); color: white; font-weight: bold; padding: 12px; border-radius: 12px; border: none; font-size: 16px; cursor: pointer;">
                        ‚úÖ ·Äù·ÄÑ·Ä∫·Äõ·Ä±·Ä¨·ÄÄ·Ä∫·Äô·Ää·Ä∫
                    </button>
                    <button onclick="closeAdminLogin()" style="flex: 1; background: linear-gradient(145deg, #6b7280, #4b5563); color: white; font-weight: bold; padding: 12px; border-radius: 12px; border: none; font-size: 16px; cursor: pointer;">
                        ‚ùå ·Äï·Ä≠·Äê·Ä∫·Äô·Ää·Ä∫
                    </button>
                </div>
                <div style="margin-top: 16px; font-size: 12px; color: #6b7280;">
                    Demo: admin123
                </div>
            `;
            
            overlay.appendChild(modal);
            document.body.appendChild(overlay);
            window.currentAdminLoginModal = overlay;
            
            overlay.offsetHeight;
            overlay.style.opacity = '1';
            
            setTimeout(() => {
                modal.style.transform = 'scale(1)';
                document.getElementById('admin-password').focus();
            }, 50);
        }

        function adminLogin() {
            const password = document.getElementById('admin-password').value;
            
            if (password === adminPassword) {
                isAdminLoggedIn = true;
                closeAdminLogin();
                showAdminPanel();
            } else {
                alert('‚ùå ·Äú·Äª·Äæ·Ä≠·ÄØ·Ä∑·Äù·Äæ·ÄÄ·Ä∫·ÄÄ·ÄØ·Äí·Ä∫ ·Äô·Äæ·Ä¨·Ä∏·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫!');
                document.getElementById('admin-password').value = '';
                document.getElementById('admin-password').focus();
            }
        }

        function closeAdminLogin() {
            if (window.currentAdminLoginModal) {
                window.currentAdminLoginModal.style.opacity = '0';
                setTimeout(() => {
                    if (document.body.contains(window.currentAdminLoginModal)) {
                        document.body.removeChild(window.currentAdminLoginModal);
                    }
                    window.currentAdminLoginModal = null;
                }, 300);
            }
        }

        function showAdminPanel() {
            const overlay = document.createElement('div');
            overlay.className = 'admin-panel fixed inset-0 z-50 overflow-y-auto';
            overlay.style.opacity = '0';
            overlay.style.transition = 'opacity 0.3s ease';
            
            overlay.innerHTML = `
                <div class="min-h-screen p-4">
                    <div class="max-w-6xl mx-auto">
                        <!-- Admin Header -->
                        <div class="bg-white rounded-2xl p-6 mb-6 shadow-2xl">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="text-3xl">üë®‚Äçüíº</div>
                                    <div>
                                        <h1 class="text-2xl font-bold text-gray-800">Admin Control Panel</h1>
                                        <p class="text-gray-600">BigWin Game ·ÄÖ·ÄÆ·Äô·Ä∂·ÄÅ·Äî·Ä∑·Ä∫·ÄÅ·ÄΩ·Ä≤·Äô·Äæ·ÄØ·ÄÖ·Äî·ÄÖ·Ä∫</p>
                                    </div>
                                </div>
                                <button onclick="closeAdminPanel()" class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-xl font-bold transition-all">
                                    ‚ùå ·Äï·Ä≠·Äê·Ä∫·Äô·Ää·Ä∫
                                </button>
                            </div>
                        </div>

                        <!-- Admin Stats -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-white rounded-xl p-6 shadow-lg">
                                <div class="text-center">
                                    <div class="text-3xl mb-2">üí∞</div>
                                    <div class="text-2xl font-bold text-green-600" id="total-deposits">0</div>
                                    <div class="text-sm text-gray-600">·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏·ÄÑ·ÄΩ·Ä±·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏</div>
                                </div>
                            </div>
                            <div class="bg-white rounded-xl p-6 shadow-lg">
                                <div class="text-center">
                                    <div class="text-3xl mb-2">üí∏</div>
                                    <div class="text-2xl font-bold text-red-600" id="total-withdraws">0</div>
                                    <div class="text-sm text-gray-600">·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏·ÄÑ·ÄΩ·Ä±·Äë·ÄØ·Äê·Ä∫</div>
                                </div>
                            </div>
                            <div class="bg-white rounded-xl p-6 shadow-lg">
                                <div class="text-center">
                                    <div class="text-3xl mb-2">üìã</div>
                                    <div class="text-2xl font-bold text-blue-600" id="pending-requests">0</div>
                                    <div class="text-sm text-gray-600">·ÄÖ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·Äî·Ä±·Äû·Ä±·Ä¨</div>
                                </div>
                            </div>
                            <div class="bg-white rounded-xl p-6 shadow-lg">
                                <div class="text-center">
                                    <div class="text-3xl mb-2">üë•</div>
                                    <div class="text-2xl font-bold text-purple-600">1</div>
                                    <div class="text-sm text-gray-600">·Ä°·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄØ·Äû·Ä∞·Äô·Äª·Ä¨·Ä∏</div>
                                </div>
                            </div>
                        </div>

                        <!-- Admin Tabs -->
                        <div class="bg-white rounded-2xl shadow-2xl overflow-hidden">
                            <div class="flex border-b">
                                <button onclick="showAdminTab('deposits')" id="deposits-tab" class="flex-1 py-4 px-6 font-bold text-green-600 bg-green-50 border-b-2 border-green-600">
                                    üì• ·ÄÑ·ÄΩ·Ä±·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ·Äô·Äª·Ä¨·Ä∏
                                </button>
                                <button onclick="showAdminTab('withdraws')" id="withdraws-tab" class="flex-1 py-4 px-6 font-bold text-gray-600 hover:bg-gray-50">
                                    üì§ ·ÄÑ·ÄΩ·Ä±·Äë·ÄØ·Äê·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ·Äô·Äª·Ä¨·Ä∏
                                </button>
                                <button onclick="showAdminTab('users')" id="users-tab" class="flex-1 py-4 px-6 font-bold text-gray-600 hover:bg-gray-50">
                                    üë• ·Ä°·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄØ·Äû·Ä∞·Äô·Äª·Ä¨·Ä∏
                                </button>
                                <button onclick="showAdminTab('gamecontrol')" id="gamecontrol-tab" class="flex-1 py-4 px-6 font-bold text-gray-600 hover:bg-gray-50">
                                    üéÆ ·ÄÇ·Ä≠·Äô·Ä∫·Ä∏·Äë·Ä≠·Äî·Ä∫·Ä∏·ÄÅ·Äª·ÄØ·Äï·Ä∫·Äô·Äæ·ÄØ
                                </button>
                            </div>

                            <!-- Deposits Tab -->
                            <div id="deposits-content" class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-xl font-bold text-gray-800">·ÄÑ·ÄΩ·Ä±·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ·Äô·Äª·Ä¨·Ä∏</h3>
                                    <div class="text-sm text-gray-600">·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏: <span id="deposits-count">0</span> ·ÄÅ·ÄØ</div>
                                </div>
                                <div id="deposits-list" class="space-y-4">
                                    <div class="text-center text-gray-500 py-8">
                                        üì≠ ·ÄÑ·ÄΩ·Ä±·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ·Äô·Äæ·ÄØ·Äô·Äõ·Äæ·Ä≠·Äû·Ä±·Ä∏·Äï·Ä´
                                    </div>
                                </div>
                            </div>

                            <!-- Withdraws Tab -->
                            <div id="withdraws-content" class="p-6 hidden">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-xl font-bold text-gray-800">·ÄÑ·ÄΩ·Ä±·Äë·ÄØ·Äê·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ·Äô·Äª·Ä¨·Ä∏</h3>
                                    <div class="text-sm text-gray-600">·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏: <span id="withdraws-count">0</span> ·ÄÅ·ÄØ</div>
                                </div>
                                <div id="withdraws-list" class="space-y-4">
                                    <div class="text-center text-gray-500 py-8">
                                        üì≠ ·ÄÑ·ÄΩ·Ä±·Äë·ÄØ·Äê·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ·Äô·Äæ·ÄØ·Äô·Äõ·Äæ·Ä≠·Äû·Ä±·Ä∏·Äï·Ä´
                                    </div>
                                </div>
                            </div>

                            <!-- Users Tab -->
                            <div id="users-content" class="p-6 hidden">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-xl font-bold text-gray-800">·Ä°·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄØ·Äû·Ä∞·Äô·Äª·Ä¨·Ä∏ ·ÄÖ·ÄÆ·Äô·Ä∂·ÄÅ·Äî·Ä∑·Ä∫·ÄÅ·ÄΩ·Ä≤·Äô·Äæ·ÄØ</h3>
                                </div>
                                <div id="users-list" class="space-y-4">
                                    <!-- Users will be populated here -->
                                </div>
                            </div>

                            <!-- Game Control Tab -->
                            <div id="gamecontrol-content" class="p-6 hidden">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold text-gray-800">üéÆ ·ÄÇ·Ä≠·Äô·Ä∫·Ä∏·Äë·Ä≠·Äî·Ä∫·Ä∏·ÄÅ·Äª·ÄØ·Äï·Ä∫·Äô·Äæ·ÄØ</h3>
                                </div>
                                
                                <!-- Next Winning Numbers Preview -->
                                <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-2xl p-6 mb-6">
                                    <h4 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                                        üîÆ ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äú·Ä¨·Äô·Ää·Ä∑·Ä∫ ·Äë·ÄΩ·ÄÄ·Ä∫·Äô·Ää·Ä∑·Ä∫·Äî·Ä∂·Äï·Ä´·Äê·Ä∫·Äô·Äª·Ä¨·Ä∏
                                        <span class="ml-auto text-sm text-purple-600">·ÄÖ·ÄÆ·ÄÖ·Äâ·Ä∫·Äë·Ä¨·Ä∏·Äû·Ä±·Ä¨ ·Äî·Ä∂·Äï·Ä´·Äê·Ä∫·Äô·Äª·Ä¨·Ä∏</span>
                                    </h4>
                                    <div class="grid grid-cols-5 gap-3 mb-4" id="next-numbers-preview">
                                        <!-- Numbers will be populated here -->
                                    </div>
                                    <div class="text-center text-sm text-gray-600">
                                        ·Äú·ÄÄ·Ä∫·Äõ·Äæ·Ä≠·Äï·ÄΩ·Ä≤·ÄÖ·Ä•·Ä∫: <span class="font-bold text-purple-600" id="current-round-display">#856</span> | 
                                        ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äë·ÄΩ·ÄÄ·Ä∫·Äô·Ää·Ä∫: <span class="font-bold text-green-600" id="next-number-display">3</span>
                                    </div>
                                </div>

                                <!-- Game Statistics -->
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                    <div class="bg-white rounded-xl p-4 shadow-lg border-l-4 border-green-500">
                                        <div class="text-center">
                                            <div class="text-2xl mb-2">üéØ</div>
                                            <div class="text-xl font-bold text-green-600" id="total-bets-today">0</div>
                                            <div class="text-sm text-gray-600">·Äö·Äî·Ä±·Ä∑·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÄ·ÄÖ·Ä¨·Ä∏·Äô·Äª·Ä¨·Ä∏</div>
                                        </div>
                                    </div>
                                    <div class="bg-white rounded-xl p-4 shadow-lg border-l-4 border-blue-500">
                                        <div class="text-center">
                                            <div class="text-2xl mb-2">üí∞</div>
                                            <div class="text-xl font-bold text-blue-600" id="total-bet-amount">0</div>
                                            <div class="text-sm text-gray-600">·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÑ·ÄΩ·Ä±</div>
                                        </div>
                                    </div>
                                    <div class="bg-white rounded-xl p-4 shadow-lg border-l-4 border-red-500">
                                        <div class="text-center">
                                            <div class="text-2xl mb-2">üèÜ</div>
                                            <div class="text-xl font-bold text-red-600" id="total-winnings">0</div>
                                            <div class="text-sm text-gray-600">·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏·ÄÜ·ÄØ·ÄÄ·Äº·Ä±·Ä∏</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Manual Control -->
                                <div class="bg-white rounded-xl p-6 shadow-lg">
                                    <h4 class="text-lg font-bold text-gray-800 mb-4">‚öôÔ∏è ·Äú·ÄÄ·Ä∫·Äñ·Äº·ÄÑ·Ä∑·Ä∫·Äë·Ä≠·Äî·Ä∫·Ä∏·ÄÅ·Äª·ÄØ·Äï·Ä∫·Äô·Äæ·ÄØ</h4>
                                    <div class="flex space-x-4">
                                        <button onclick="skipToNextRound()" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-6 rounded-xl transition-all">
                                            ‚è≠Ô∏è ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äï·ÄΩ·Ä≤·ÄÖ·Ä•·Ä∫·Äû·Ä≠·ÄØ·Ä∑·ÄÄ·Äª·Ä±·Ä¨·Ä∫·Äô·Ää·Ä∫
                                        </button>
                                        <button onclick="resetGameSequence()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-xl transition-all">
                                            üîÑ ·Äî·Ä∂·Äï·Ä´·Äê·Ä∫·ÄÖ·ÄÆ·ÄÖ·Äâ·Ä∫·Äô·Äæ·ÄØ ·Äï·Äº·Äî·Ä∫·ÄÖ·Äô·Ää·Ä∫
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(overlay);
            window.currentAdminPanel = overlay;
            
            // Animate in
            overlay.offsetHeight;
            overlay.style.opacity = '1';
            
            // Load admin data
            updateAdminStats();
            loadDepositRequests();
            loadWithdrawRequests();
            loadUsersList();
        }

        function showAdminTab(tabName) {
            // Hide all tabs
            document.getElementById('deposits-content').classList.add('hidden');
            document.getElementById('withdraws-content').classList.add('hidden');
            document.getElementById('users-content').classList.add('hidden');
            document.getElementById('gamecontrol-content').classList.add('hidden');
            
            // Reset tab styles
            document.getElementById('deposits-tab').className = 'flex-1 py-4 px-6 font-bold text-gray-600 hover:bg-gray-50';
            document.getElementById('withdraws-tab').className = 'flex-1 py-4 px-6 font-bold text-gray-600 hover:bg-gray-50';
            document.getElementById('users-tab').className = 'flex-1 py-4 px-6 font-bold text-gray-600 hover:bg-gray-50';
            document.getElementById('gamecontrol-tab').className = 'flex-1 py-4 px-6 font-bold text-gray-600 hover:bg-gray-50';
            
            // Show selected tab
            if (tabName === 'deposits') {
                document.getElementById('deposits-content').classList.remove('hidden');
                document.getElementById('deposits-tab').className = 'flex-1 py-4 px-6 font-bold text-green-600 bg-green-50 border-b-2 border-green-600';
            } else if (tabName === 'withdraws') {
                document.getElementById('withdraws-content').classList.remove('hidden');
                document.getElementById('withdraws-tab').className = 'flex-1 py-4 px-6 font-bold text-red-600 bg-red-50 border-b-2 border-red-600';
            } else if (tabName === 'users') {
                document.getElementById('users-content').classList.remove('hidden');
                document.getElementById('users-tab').className = 'flex-1 py-4 px-6 font-bold text-purple-600 bg-purple-50 border-b-2 border-purple-600';
            } else if (tabName === 'gamecontrol') {
                document.getElementById('gamecontrol-content').classList.remove('hidden');
                document.getElementById('gamecontrol-tab').className = 'flex-1 py-4 px-6 font-bold text-blue-600 bg-blue-50 border-b-2 border-blue-600';
                loadGameControlData();
            }
        }

        function updateAdminStats() {
            const totalDeposits = depositRequests.filter(r => r.status === 'approved').reduce((sum, r) => sum + r.amount, 0);
            const totalWithdraws = withdrawRequests.filter(r => r.status === 'approved').reduce((sum, r) => sum + r.amount, 0);
            const pendingRequests = depositRequests.filter(r => r.status === 'pending').length + withdrawRequests.filter(r => r.status === 'pending').length;
            
            document.getElementById('total-deposits').textContent = totalDeposits.toLocaleString() + ' Ks';
            document.getElementById('total-withdraws').textContent = totalWithdraws.toLocaleString() + ' Ks';
            document.getElementById('pending-requests').textContent = pendingRequests;
        }

        function loadDepositRequests() {
            const container = document.getElementById('deposits-list');
            const countElement = document.getElementById('deposits-count');
            
            if (depositRequests.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-500 py-8">üì≠ ·ÄÑ·ÄΩ·Ä±·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ·Äô·Äæ·ÄØ·Äô·Äõ·Äæ·Ä≠·Äû·Ä±·Ä∏·Äï·Ä´</div>';
                countElement.textContent = '0';
                return;
            }
            
            countElement.textContent = depositRequests.length;
            
            container.innerHTML = depositRequests.map(request => `
                <div class="request-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="text-2xl">${request.method === 'wave' ? 'üì±' : 'üí≥'}</div>
                            <div>
                                <div class="font-bold text-lg">${request.amount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫</div>
                                <div class="text-sm text-gray-600">${request.method === 'wave' ? 'Wave Pay' : 'KBZ Pay'}</div>
                            </div>
                        </div>
                        <div class="status-${request.status} px-3 py-1 rounded-full text-sm font-bold">
                            ${request.status === 'pending' ? '‚è≥ ·ÄÖ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·Äî·Ä±' : request.status === 'approved' ? '‚úÖ ·Ä°·Äê·Ää·Ä∫·Äï·Äº·ÄØ·Äï·Äº·ÄÆ·Ä∏' : '‚ùå ·Äï·Äö·Ä∫·ÄÅ·Äª·Äï·Äº·ÄÆ·Ä∏'}
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-sm mb-4">
                        <div><strong>·Äñ·ÄØ·Äî·Ä∫·Ä∏:</strong> ${request.phone}</div>
                        <div><strong>·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫:</strong> ${request.time}</div>
                        <div><strong>·Ä°·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄØ·Äû·Ä∞:</strong> ${request.userId}</div>
                        <div><strong>ID:</strong> #${request.id}</div>
                    </div>
                    ${request.status === 'pending' ? `
                        <div class="flex space-x-3">
                            <button onclick="approveDeposit('${request.id}')" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-xl transition-all">
                                ‚úÖ ·Ä°·Äê·Ää·Ä∫·Äï·Äº·ÄØ·Äô·Ää·Ä∫
                            </button>
                            <button onclick="rejectDeposit('${request.id}')" class="flex-1 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-xl transition-all">
                                ‚ùå ·Äï·Äö·Ä∫·ÄÅ·Äª·Äô·Ää·Ä∫
                            </button>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function loadWithdrawRequests() {
            const container = document.getElementById('withdraws-list');
            const countElement = document.getElementById('withdraws-count');
            
            if (withdrawRequests.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-500 py-8">üì≠ ·ÄÑ·ÄΩ·Ä±·Äë·ÄØ·Äê·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ·Äô·Äæ·ÄØ·Äô·Äõ·Äæ·Ä≠·Äû·Ä±·Ä∏·Äï·Ä´</div>';
                countElement.textContent = '0';
                return;
            }
            
            countElement.textContent = withdrawRequests.length;
            
            container.innerHTML = withdrawRequests.map(request => `
                <div class="request-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="text-2xl">${request.method === 'wave' ? 'üì±' : 'üí≥'}</div>
                            <div>
                                <div class="font-bold text-lg">${request.amount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫</div>
                                <div class="text-sm text-gray-600">${request.method === 'wave' ? 'Wave Pay' : 'KBZ Pay'}</div>
                            </div>
                        </div>
                        <div class="status-${request.status} px-3 py-1 rounded-full text-sm font-bold">
                            ${request.status === 'pending' ? '‚è≥ ·ÄÖ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·Äî·Ä±' : request.status === 'approved' ? '‚úÖ ·Ä°·Äê·Ää·Ä∫·Äï·Äº·ÄØ·Äï·Äº·ÄÆ·Ä∏' : '‚ùå ·Äï·Äö·Ä∫·ÄÅ·Äª·Äï·Äº·ÄÆ·Ä∏'}
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-sm mb-4">
                        <div><strong>·Ä°·Äô·Ää·Ä∫:</strong> ${request.accountName}</div>
                        <div><strong>·Äñ·ÄØ·Äî·Ä∫·Ä∏:</strong> ${request.phone}</div>
                        <div><strong>·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫:</strong> ${request.time}</div>
                        <div><strong>·Ä°·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄØ·Äû·Ä∞:</strong> ${request.userId}</div>
                    </div>
                    ${request.status === 'pending' ? `
                        <div class="flex space-x-3">
                            <button onclick="approveWithdraw('${request.id}')" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-xl transition-all">
                                ‚úÖ ·Ä°·Äê·Ää·Ä∫·Äï·Äº·ÄØ·Äô·Ää·Ä∫
                            </button>
                            <button onclick="rejectWithdraw('${request.id}')" class="flex-1 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-xl transition-all">
                                ‚ùå ·Äï·Äö·Ä∫·ÄÅ·Äª·Äô·Ää·Ä∫
                            </button>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function loadUsersList() {
            const container = document.getElementById('users-list');
            
            container.innerHTML = Object.keys(userBalances).map(userId => `
                <div class="request-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="text-2xl">üë§</div>
                            <div>
                                <div class="font-bold text-lg">${userId}</div>
                                <div class="text-sm text-gray-600">·Ä°·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄØ·Äû·Ä∞</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-green-600">${userBalances[userId].toLocaleString()} Ks</div>
                            <div class="text-sm text-gray-600">·Äú·ÄÄ·Ä∫·ÄÄ·Äª·Äî·Ä∫·ÄÑ·ÄΩ·Ä±</div>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="adjustUserBalance('${userId}', 'add')" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-xl transition-all">
                            ‚ûï ·ÄÑ·ÄΩ·Ä±·Äë·Ää·Ä∑·Ä∫·Äô·Ää·Ä∫
                        </button>
                        <button onclick="adjustUserBalance('${userId}', 'subtract')" class="flex-1 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-xl transition-all">
                            ‚ûñ ·ÄÑ·ÄΩ·Ä±·Äî·ÄØ·Äê·Ä∫·Äô·Ää·Ä∫
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function approveDeposit(requestId) {
            const request = depositRequests.find(r => r.id === requestId);
            if (request) {
                request.status = 'approved';
                
                // Add money to user balance
                userBalances[request.userId] = (userBalances[request.userId] || 0) + request.amount;
                
                // Update display if current user
                if (request.userId === currentUserId) {
                    updateBalance(userBalances[currentUserId]);
                }
                
                // Refresh admin panel
                updateAdminStats();
                loadDepositRequests();
                
                alert(`‚úÖ ·ÄÑ·ÄΩ·Ä±·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ ${request.amount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫ ·Ä°·Äê·Ää·Ä∫·Äï·Äº·ÄØ·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ!`);
            }
        }

        function rejectDeposit(requestId) {
            const request = depositRequests.find(r => r.id === requestId);
            if (request && confirm(`‚ùå ·ÄÑ·ÄΩ·Ä±·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ ${request.amount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫ ·ÄÄ·Ä≠·ÄØ ·Äï·Äö·Ä∫·ÄÅ·Äª·Äô·Ää·Ä∫·Äñ·Äº·ÄÖ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã ·Äû·Ä±·ÄÅ·Äª·Ä¨·Äï·Ä´·Äû·Äú·Ä¨·Ä∏?`)) {
                request.status = 'rejected';
                
                // Refresh admin panel
                updateAdminStats();
                loadDepositRequests();
                
                alert(`‚ùå ·ÄÑ·ÄΩ·Ä±·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ ·Äï·Äö·Ä∫·ÄÅ·Äª·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ!`);
            }
        }

        function approveWithdraw(requestId) {
            const request = withdrawRequests.find(r => r.id === requestId);
            if (request) {
                request.status = 'approved';
                
                // Money already deducted when request was made
                
                // Refresh admin panel
                updateAdminStats();
                loadWithdrawRequests();
                
                alert(`‚úÖ ·ÄÑ·ÄΩ·Ä±·Äë·ÄØ·Äê·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ ${request.amount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫ ·Ä°·Äê·Ää·Ä∫·Äï·Äº·ÄØ·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ!`);
            }
        }

        function rejectWithdraw(requestId) {
            const request = withdrawRequests.find(r => r.id === requestId);
            if (request && confirm(`‚ùå ·ÄÑ·ÄΩ·Ä±·Äë·ÄØ·Äê·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ ${request.amount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫ ·ÄÄ·Ä≠·ÄØ ·Äï·Äö·Ä∫·ÄÅ·Äª·Äô·Ää·Ä∫·Äñ·Äº·ÄÖ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã ·Äû·Ä±·ÄÅ·Äª·Ä¨·Äï·Ä´·Äû·Äú·Ä¨·Ä∏?`)) {
                request.status = 'rejected';
                
                // Return money to user balance
                userBalances[request.userId] = (userBalances[request.userId] || 0) + request.amount;
                
                // Update display if current user
                if (request.userId === currentUserId) {
                    updateBalance(userBalances[currentUserId]);
                }
                
                // Refresh admin panel
                updateAdminStats();
                loadWithdrawRequests();
                loadUsersList();
                
                alert(`‚ùå ·ÄÑ·ÄΩ·Ä±·Äë·ÄØ·Äê·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ ·Äï·Äö·Ä∫·ÄÅ·Äª·Äï·Äº·ÄÆ·Ä∏ ·ÄÑ·ÄΩ·Ä±·Äï·Äº·Äî·Ä∫·Ä°·Äô·Ä∫·Ä∏·Äï·Ä±·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ!`);
            }
        }

        function adjustUserBalance(userId, action) {
            const amount = prompt(`${action === 'add' ? '‚ûï ·Äë·Ää·Ä∑·Ä∫·Äô·Ää·Ä∑·Ä∫' : '‚ûñ ·Äî·ÄØ·Äê·Ä∫·Äô·Ää·Ä∑·Ä∫'} ·ÄÑ·ÄΩ·Ä±·Äï·Äô·Ä¨·Äè ·Äõ·Ä≠·ÄØ·ÄÄ·Ä∫·Äë·Ää·Ä∑·Ä∫·Äï·Ä´:`);
            
            if (amount && !isNaN(amount) && parseInt(amount) > 0) {
                const adjustAmount = parseInt(amount);
                
                if (action === 'add') {
                    userBalances[userId] = (userBalances[userId] || 0) + adjustAmount;
                    alert(`‚úÖ ${userId} ·Åè ·Äú·ÄÄ·Ä∫·ÄÄ·Äª·Äî·Ä∫·ÄÑ·ÄΩ·Ä±·Äê·ÄΩ·ÄÑ·Ä∫ ${adjustAmount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫ ·Äë·Ää·Ä∑·Ä∫·Äï·Ä±·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ!`);
                } else {
                    if (userBalances[userId] >= adjustAmount) {
                        userBalances[userId] -= adjustAmount;
                        alert(`‚úÖ ${userId} ·Åè ·Äú·ÄÄ·Ä∫·ÄÄ·Äª·Äî·Ä∫·ÄÑ·ÄΩ·Ä±·Äô·Äæ ${adjustAmount.toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫ ·Äî·ÄØ·Äê·Ä∫·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ!`);
                    } else {
                        alert(`‚ùå ·Äú·ÄÄ·Ä∫·ÄÄ·Äª·Äî·Ä∫·ÄÑ·ÄΩ·Ä± ·Äô·Äú·ÄØ·Ä∂·Äú·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Ä´! ·Äú·ÄÄ·Ä∫·Äõ·Äæ·Ä≠: ${userBalances[userId].toLocaleString()} ·ÄÄ·Äª·Äï·Ä∫`);
                        return;
                    }
                }
                
                // Update display if current user
                if (userId === currentUserId) {
                    updateBalance(userBalances[userId]);
                }
                
                // Refresh admin panel
                loadUsersList();
            }
        }

        function closeAdminPanel() {
            if (window.currentAdminPanel) {
                window.currentAdminPanel.style.opacity = '0';
                setTimeout(() => {
                    if (document.body.contains(window.currentAdminPanel)) {
                        document.body.removeChild(window.currentAdminPanel);
                    }
                    window.currentAdminPanel = null;
                    isAdminLoggedIn = false;
                }, 300);
            }
        }

        // ==================== DEPOSIT SYSTEM ====================

        function showDepositModal() {
            alert('üì• ·ÄÑ·ÄΩ·Ä±·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äõ·Äî·Ä∫ Admin Panel ·Äô·Äæ ·Äë·Ä≠·Äî·Ä∫·Ä∏·ÄÅ·Äª·ÄØ·Äï·Ä∫·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã Demo ·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ Admin ·ÄÄ·ÄØ·Äí·Ä∫: admin123');
        }

        function showWithdrawModal() {
            alert('üì§ ·ÄÑ·ÄΩ·Ä±·Äë·ÄØ·Äê·Ä∫·Äõ·Äî·Ä∫ Admin Panel ·Äô·Äæ ·Äë·Ä≠·Äî·Ä∫·Ä∏·ÄÅ·Äª·ÄØ·Äï·Ä∫·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã Demo ·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ Admin ·ÄÄ·ÄØ·Äí·Ä∫: admin123');
        }

        // ==================== GAME CONTROL FUNCTIONS ====================

        function loadGameControlData() {
            // Update current round display
            document.getElementById('current-round-display').textContent = `#${roundNumber}`;
            
            // Show next numbers in sequence
            const nextNumbersContainer = document.getElementById('next-numbers-preview');
            const currentIndex = gameResults.length % gameNumberSequence.length;
            
            let nextNumbersHTML = '';
            for (let i = 0; i < 10; i++) {
                const index = (currentIndex + i) % gameNumberSequence.length;
                const number = gameNumberSequence[index];
                const isNext = i === 0;
                
                let ballColor = 'blue';
                if ([2, 4, 6, 8].includes(number)) ballColor = 'red';
                else if ([1, 3, 7, 9].includes(number)) ballColor = 'green';
                else if ([0, 5].includes(number)) ballColor = 'purple';
                
                nextNumbersHTML += `
                    <div class="text-center">
                        <div class="lottery-ball ${ballColor} w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold mb-2 ${isNext ? 'ring-4 ring-yellow-400 ring-opacity-75' : ''}">
                            ${number}
                        </div>
                        <div class="text-xs text-gray-600">${isNext ? '·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äë·ÄΩ·ÄÄ·Ä∫·Äô·Ää·Ä∫' : `+${i}`}</div>
                    </div>
                `;
            }
            nextNumbersContainer.innerHTML = nextNumbersHTML;
            
            // Update next number display
            const nextNumber = gameNumberSequence[currentIndex];
            document.getElementById('next-number-display').textContent = nextNumber;
            
            // Update game statistics
            const totalBetsToday = bettingHistory.length;
            const totalBetAmount = bettingHistory.reduce((sum, bet) => sum + bet.betAmount, 0);
            const totalWinnings = bettingHistory.filter(bet => bet.isWin).reduce((sum, bet) => sum + bet.winAmount, 0);
            
            document.getElementById('total-bets-today').textContent = totalBetsToday;
            document.getElementById('total-bet-amount').textContent = totalBetAmount.toLocaleString() + ' Ks';
            document.getElementById('total-winnings').textContent = totalWinnings.toLocaleString() + ' Ks';
        }

        function skipToNextRound() {
            if (confirm('‚è≠Ô∏è ·Äú·ÄÄ·Ä∫·Äõ·Äæ·Ä≠·Äï·ÄΩ·Ä≤·ÄÖ·Ä•·Ä∫·ÄÄ·Ä≠·ÄØ ·ÄÅ·Äª·ÄÄ·Ä∫·ÄÅ·Äª·ÄÑ·Ä∫·Ä∏·Äï·Äº·ÄÆ·Ä∏·ÄÜ·ÄØ·Ä∂·Ä∏·ÄÖ·Ä±·Äï·Äº·ÄÆ·Ä∏ ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äï·ÄΩ·Ä≤·ÄÖ·Ä•·Ä∫·Äû·Ä≠·ÄØ·Ä∑ ·ÄÄ·Äª·Ä±·Ä¨·Ä∫·Äô·Ää·Ä∫·Äñ·Äº·ÄÖ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã ·Äû·Ä±·ÄÅ·Äª·Ä¨·Äï·Ä´·Äû·Äú·Ä¨·Ä∏?')) {
                countdownTimer = 1; // Will trigger next round in 1 second
                alert('‚úÖ ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äï·ÄΩ·Ä≤·ÄÖ·Ä•·Ä∫·Äû·Ä≠·ÄØ·Ä∑ ·ÄÄ·Äª·Ä±·Ä¨·Ä∫·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫...');
            }
        }

        function resetGameSequence() {
            if (confirm('üîÑ ·Äî·Ä∂·Äï·Ä´·Äê·Ä∫·ÄÖ·ÄÆ·ÄÖ·Äâ·Ä∫·Äô·Äæ·ÄØ·ÄÄ·Ä≠·ÄØ ·Äï·Äº·Äî·Ä∫·ÄÖ·Äô·Ää·Ä∫·Äñ·Äº·ÄÖ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã ·Ä§·Äú·ÄØ·Äï·Ä∫·ÄÜ·Ä±·Ä¨·ÄÑ·Ä∫·ÄÅ·Äª·ÄÄ·Ä∫·Äû·Ää·Ä∫ ·ÄÇ·Ä≠·Äô·Ä∫·Ä∏·Äõ·Äú·Äí·Ä∫·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ ·Äï·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äú·Ä≤·ÄÖ·Ä±·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã ·Äû·Ä±·ÄÅ·Äª·Ä¨·Äï·Ä´·Äû·Äú·Ä¨·Ä∏?')) {
                // Reset game results to start sequence over
                gameResults = [];
                
                // Shuffle the sequence for more randomness
                gameNumberSequence = [3, 6, 0, 4, 5, 1, 7, 9, 2, 8].sort(() => Math.random() - 0.5);
                
                // Reload the game control data
                loadGameControlData();
                
                alert('‚úÖ ·Äî·Ä∂·Äï·Ä´·Äê·Ä∫·ÄÖ·ÄÆ·ÄÖ·Äâ·Ä∫·Äô·Äæ·ÄØ ·Äï·Äº·Äî·Ä∫·ÄÖ·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ! ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äë·ÄΩ·ÄÄ·Ä∫·Äô·Ää·Ä∑·Ä∫·Äî·Ä∂·Äï·Ä´·Äê·Ä∫·Äô·Äª·Ä¨·Ä∏ ·Äï·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äú·Ä≤·Äû·ÄΩ·Ä¨·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ·Åã');
            }
        }

        // Firebase Authentication and Initialization
        function initializeFirebase() {
            // Sign in anonymously
            firebase.signInAnonymously(firebase.auth)
                .then(() => {
                    console.log('‚úÖ Firebase ·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·ÄÖ·ÄΩ·Ä¨ ·ÄÅ·Äª·Ä≠·Äê·Ä∫·ÄÜ·ÄÄ·Ä∫·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ!');
                    updateFirebaseStatus('connected');
                })
                .catch((error) => {
                    console.error('‚ùå Firebase ·ÄÅ·Äª·Ä≠·Äê·Ä∫·ÄÜ·ÄÄ·Ä∫·Äô·Äæ·ÄØ ·Äô·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´:', error);
                    updateFirebaseStatus('error');
                    // Fallback to local storage
                    currentUserId = 'local_user_' + Date.now();
                    initializeLocalData();
                });

            // Listen for authentication state changes
            firebase.onAuthStateChanged(firebase.auth, (user) => {
                if (user) {
                    firebaseUser = user;
                    currentUserId = user.uid;
                    console.log('üë§ ·Ä°·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄØ·Äû·Ä∞ ·Äú·ÄÄ·Ä∫·Äõ·Äæ·Ä≠:', currentUserId);
                    
                    // Initialize user data
                    initializeUserData();
                    
                    // Load game data from Firebase
                    loadGameDataFromFirebase();
                    
                    // Start real-time listeners
                    setupRealtimeListeners();
                } else {
                    console.log('üë§ ·Ä°·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄØ·Äû·Ä∞ ·Äô·Äõ·Äæ·Ä≠·Äï·Ä´');
                    currentUserId = 'local_user_' + Date.now();
                    initializeLocalData();
                }
            });
        }

        function initializeUserData() {
            const userRef = firebase.ref(firebase.database, `users/${currentUserId}`);
            
            firebase.get(userRef).then((snapshot) => {
                if (snapshot.exists()) {
                    const userData = snapshot.val();
                    userBalances[currentUserId] = userData.balance || 10000;
                    updateBalance(userBalances[currentUserId]);
                } else {
                    // New user - set initial balance
                    const initialData = {
                        balance: 10000,
                        createdAt: Date.now(),
                        lastActive: Date.now()
                    };
                    
                    firebase.set(userRef, initialData);
                    userBalances[currentUserId] = 10000;
                    updateBalance(10000);
                }
            }).catch((error) => {
                console.error('‚ùå ·Ä°·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄØ·Äû·Ä∞ ·Äí·Ä±·Äê·Ä¨ ·Äõ·Äö·Ä∞·Äô·Äæ·ÄØ ·Äô·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´:', error);
                initializeLocalData();
            });
        }

        function initializeLocalData() {
            // Fallback to local storage if Firebase fails
            const savedBalance = localStorage.getItem('userBalance');
            const balance = savedBalance ? parseInt(savedBalance) : 10000;
            userBalances[currentUserId] = balance;
            updateBalance(balance);
        }

        function loadGameDataFromFirebase() {
            // Load game sequence
            const sequenceRef = firebase.ref(firebase.database, 'gameSettings/numberSequence');
            firebase.get(sequenceRef).then((snapshot) => {
                if (snapshot.exists()) {
                    gameNumberSequence = snapshot.val();
                } else {
                    // Set initial sequence
                    firebase.set(sequenceRef, gameNumberSequence);
                }
            });

            // Load current round
            const roundRef = firebase.ref(firebase.database, 'gameSettings/currentRound');
            firebase.get(roundRef).then((snapshot) => {
                if (snapshot.exists()) {
                    roundNumber = snapshot.val();
                    document.getElementById('round-number').textContent = `#${roundNumber}`;
                }
            });

            // Load game results
            const resultsRef = firebase.ref(firebase.database, 'gameResults');
            firebase.get(resultsRef).then((snapshot) => {
                if (snapshot.exists()) {
                    gameResults = Object.values(snapshot.val()) || [];
                }
            });
        }

        function setupRealtimeListeners() {
            // Listen for round updates
            const roundRef = firebase.ref(firebase.database, 'gameSettings/currentRound');
            firebase.onValue(roundRef, (snapshot) => {
                if (snapshot.exists()) {
                    roundNumber = snapshot.val();
                    document.getElementById('round-number').textContent = `#${roundNumber}`;
                }
            });

            // Listen for new game results
            const resultsRef = firebase.ref(firebase.database, 'gameResults');
            firebase.onValue(resultsRef, (snapshot) => {
                if (snapshot.exists()) {
                    const newResults = Object.values(snapshot.val()) || [];
                    if (newResults.length > gameResults.length) {
                        gameResults = newResults;
                        // Update UI with latest result
                        updateGameResultsUI();
                    }
                }
            });

            // Listen for deposit requests (admin only)
            if (isAdminLoggedIn) {
                const depositsRef = firebase.ref(firebase.database, 'depositRequests');
                firebase.onValue(depositsRef, (snapshot) => {
                    if (snapshot.exists()) {
                        depositRequests = Object.values(snapshot.val()) || [];
                        if (window.currentAdminPanel) {
                            loadDepositRequests();
                            updateAdminStats();
                        }
                    }
                });

                const withdrawsRef = firebase.ref(firebase.database, 'withdrawRequests');
                firebase.onValue(withdrawsRef, (snapshot) => {
                    if (snapshot.exists()) {
                        withdrawRequests = Object.values(snapshot.val()) || [];
                        if (window.currentAdminPanel) {
                            loadWithdrawRequests();
                            updateAdminStats();
                        }
                    }
                });
            }
        }

        function updateGameResultsUI() {
            if (gameResults.length > 0) {
                const latestResult = gameResults[gameResults.length - 1];
                const isBig = latestResult >= 5;
                const isRed = [2, 4, 6, 8].includes(latestResult);
                const isGreen = [1, 3, 7, 9].includes(latestResult);
                const isPurple = [0, 5].includes(latestResult);
                
                let ballColor;
                if (isRed) ballColor = 'red';
                else if (isGreen) ballColor = 'green';
                else if (isPurple) ballColor = 'purple';
                else ballColor = isBig ? 'red' : 'blue';
                
                updateRecentNumbers(latestResult, ballColor);
            }
        }

        // Firebase-enabled functions
        function saveUserBalance(userId, balance) {
            if (currentUserId && firebase.database) {
                const userRef = firebase.ref(firebase.database, `users/${userId}`);
                firebase.update(userRef, {
                    balance: balance,
                    lastActive: Date.now()
                }).catch((error) => {
                    console.error('‚ùå ·Äú·ÄÄ·Ä∫·ÄÄ·Äª·Äî·Ä∫·ÄÑ·ÄΩ·Ä± ·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äô·Äæ·ÄØ ·Äô·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´:', error);
                    // Fallback to local storage
                    localStorage.setItem('userBalance', balance.toString());
                });
            } else {
                // Fallback to local storage
                localStorage.setItem('userBalance', balance.toString());
            }
        }

        function saveBetToFirebase(bet) {
            if (currentUserId && firebase.database) {
                const betsRef = firebase.ref(firebase.database, `bets/${currentUserId}`);
                firebase.push(betsRef, {
                    ...bet,
                    timestamp: Date.now()
                }).catch((error) => {
                    console.error('‚ùå ·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÄ·ÄÖ·Ä¨·Ä∏ ·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äô·Äæ·ÄØ ·Äô·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´:', error);
                });
            }
        }

        function saveGameResultToFirebase(result) {
            if (firebase.database) {
                const resultsRef = firebase.ref(firebase.database, 'gameResults');
                firebase.push(resultsRef, {
                    number: result,
                    round: roundNumber,
                    timestamp: Date.now()
                }).catch((error) => {
                    console.error('‚ùå ·ÄÇ·Ä≠·Äô·Ä∫·Ä∏·Äõ·Äú·Äí·Ä∫ ·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äô·Äæ·ÄØ ·Äô·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´:', error);
                });

                // Update current round
                const roundRef = firebase.ref(firebase.database, 'gameSettings/currentRound');
                firebase.set(roundRef, roundNumber + 1).catch((error) => {
                    console.error('‚ùå ·Äï·ÄΩ·Ä≤·ÄÖ·Ä•·Ä∫·Äî·Ä∂·Äï·Ä´·Äê·Ä∫ ·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äô·Äæ·ÄØ ·Äô·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´:', error);
                });
            }
        }

        function saveDepositRequest(request) {
            if (firebase.database) {
                const depositsRef = firebase.ref(firebase.database, 'depositRequests');
                firebase.push(depositsRef, request).catch((error) => {
                    console.error('‚ùå ·ÄÑ·ÄΩ·Ä±·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ ·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äô·Äæ·ÄØ ·Äô·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´:', error);
                });
            }
        }

        function saveWithdrawRequest(request) {
            if (firebase.database) {
                const withdrawsRef = firebase.ref(firebase.database, 'withdrawRequests');
                firebase.push(withdrawsRef, request).catch((error) => {
                    console.error('‚ùå ·ÄÑ·ÄΩ·Ä±·Äë·ÄØ·Äê·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·ÄØ ·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äô·Äæ·ÄØ ·Äô·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´:', error);
                });
            }
        }

        function updateFirebaseStatus(status) {
            const statusElement = document.getElementById('firebase-status');
            if (!statusElement) return;
            
            if (status === 'connected') {
                statusElement.innerHTML = `
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-green-600 font-medium">·ÄÅ·Äª·Ä≠·Äê·Ä∫·ÄÜ·ÄÄ·Ä∫·Äï·Äº·ÄÆ·Ä∏</span>
                `;
            } else if (status === 'error') {
                statusElement.innerHTML = `
                    <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                    <span class="text-red-600 font-medium">·ÄÅ·Äª·Ä≠·Äê·Ä∫·ÄÜ·ÄÄ·Ä∫·Äô·Äæ·ÄØ·Äï·Äº·Äê·Ä∫</span>
                `;
            } else {
                statusElement.innerHTML = `
                    <div class="w-2 h-2 bg-yellow-500 rounded-full animate-pulse"></div>
                    <span class="text-gray-600">·ÄÅ·Äª·Ä≠·Äê·Ä∫·ÄÜ·ÄÄ·Ä∫·Äî·Ä±...</span>
                `;
            }
        }

        // Initialize Firebase and start the game
        initializeFirebase();
        startTimer();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97fe50c387068955',t:'MTc1ODAwNDIzMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
