<!-- ငွေသွင်း / ငွေထုတ် Buttons -->
<div style="margin:15px;">
  <button onclick="showDeposit()">ငွေသွင်း</button>
  <button onclick="showWithdraw()">ငွေထုတ်</button>
</div>

<!-- Deposit Form -->
<div id="depositForm" style="display:none; margin:10px; padding:10px; border:1px solid #ccc;">
  <h3>💵 ငွေသွင်း</h3>
  <p>Wave Pay: 09766999230 (Daw Nwet Nwet Win)</p>
  <p>K Pay: 09766999230 (Daw Nwet Nwet Win)</p>
  <label>ငွေသွင်းမည့် ပမာဏ:</label>
  <input type="number" id="depositAmount" min="100" step="100">
  <button onclick="requestDeposit()">📤 တင်သွင်းမယ်</button>
</div>

<!-- Withdraw Form -->
<div id="withdrawForm" style="display:none; margin:10px; padding:10px; border:1px solid #ccc;">
  <h3>💵 ငွေထုတ်</h3>
  <label>ထုတ်မည့် ပမာဏ:</label>
  <input type="number" id="withdrawAmount" min="100" step="100"><br><br>
  <label>Account Type:</label>
  <select id="withdrawType">
    <option value="WavePay">Wave Pay</option>
    <option value="KPay">K Pay</option>
  </select><br><br>
  <label>Account Number:</label>
  <input type="text" id="withdrawNumber" placeholder="ဖုန်းနံပါတ်"><br><br>
  <button onclick="requestWithdraw()">📥 ထုတ်မယ်</button>
</div>

<!-- Transaction History -->
<h3>💵 Transaction History</h3>
<table>
  <thead>
    <tr>
      <th>အချိန်</th>
      <th>လုပ်ဆောင်ချက်</th>
      <th>ပမာဏ</th>
      <th>Balance</th>
    </tr>
  </thead>
  <tbody id="transactionHistory"></tbody>
</table>

<script>
let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

function showDeposit() {
  document.getElementById("depositForm").style.display = "block";
  document.getElementById("withdrawForm").style.display = "none";
}

function showWithdraw() {
  document.getElementById("depositForm").style.display = "none";
  document.getElementById("withdrawForm").style.display = "block";
}

function requestDeposit() {
  let amt = parseInt(document.getElementById("depositAmount").value);
  if(isNaN(amt) || amt <= 0) return alert("ပမာဏထည့်ပါ");
  let now = new Date().toLocaleTimeString();
  transactions.unshift({time:now, type:"Deposit Request", amount:amt, balance:balance});
  localStorage.setItem("transactions", JSON.stringify(transactions));
  renderTransactions();
  alert("Wave/KPay နံပါတ်ကို ငွေသွင်းပြီး Admin အတည်ပြုပါမည်။");
  document.getElementById("depositAmount").value="";
}

function requestWithdraw() {
  let amt = parseInt(document.getElementById("withdrawAmount").value);
  let type = document.getElementById("withdrawType").value;
  let number = document.getElementById("withdrawNumber").value.trim();
  if(isNaN(amt) || amt <= 0) return alert("ပမာဏထည့်ပါ");
  if(number==="") return alert("Account Number ထည့်ပါ");
  if(amt > balance) return alert("Balance မလောက်ပါ");

  let now = new Date().toLocaleTimeString();
  transactions.unshift({time:now, type:"Withdraw Request ("+type+" - "+number+")", amount:amt, balance:balance-amt});
  localStorage.setItem("transactions", JSON.stringify(transactions));
  renderTransactions();
  alert("Admin အတည်ပြုပြီးနောက် ငွေထုတ်ပေးမည်။");
  document.getElementById("withdrawAmount").value="";
  document.getElementById("withdrawNumber").value="";
}

function renderTransactions() {
  let tbody = document.getElementById("transactionHistory");
  tbody.innerHTML="";
  transactions.forEach(t=>{
    let row=document.createElement("tr");
    row.innerHTML=`<td>${t.time}</td><td>${t.type}</td><td>${t.amount}</td><td>${t.balance}</td>`;
    tbody.appendChild(row);
  });
}
renderTransactions();
</script>
